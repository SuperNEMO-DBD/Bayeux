<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bayeux: bayeux/datatools/eos/portable_iarchive.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_bayeux_66x55_transparent.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bayeux
   &#160;<span id="projectnumber">3.1.2</span>
   </div>
   <div id="projectbrief">Core Foundation library for SuperNEMO</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_af12b6c89edb2488d8ffbb3d78091344.html">bayeux</a></li><li class="navelem"><a class="el" href="dir_2e5576f889cb924ce0d9b5028c8ca124.html">datatools</a></li><li class="navelem"><a class="el" href="dir_23732f47e9a3af25e4060ee69b289c64.html">eos</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">portable_iarchive.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides an archive to read from portable binary files.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;istream&gt;</code><br />
<code>#include &lt;boost/version.hpp&gt;</code><br />
<code>#include &lt;boost/utility/enable_if.hpp&gt;</code><br />
<code>#include &lt;boost/archive/basic_binary_iprimitive.hpp&gt;</code><br />
<code>#include &lt;boost/archive/basic_binary_iarchive.hpp&gt;</code><br />
<code>#include &lt;boost/archive/detail/polymorphic_iarchive_impl.hpp&gt;</code><br />
<code>#include &lt;boost/integer/endian.hpp&gt;</code><br />
<code>#include &lt;boost/math/fpclassify.hpp&gt;</code><br />
<code>#include &lt;boost/program_options/config.hpp&gt;</code><br />
<code>#include &lt;boost/program_options/detail/convert.hpp&gt;</code><br />
<code>#include &lt;boost/type_traits/is_integral.hpp&gt;</code><br />
<code>#include &lt;boost/type_traits/is_unsigned.hpp&gt;</code><br />
<code>#include &lt;boost/type_traits/is_arithmetic.hpp&gt;</code><br />
<code>#include &lt;boost/type_traits/is_floating_point.hpp&gt;</code><br />
<code>#include &quot;<a class="el" href="portable__archive__exception_8hpp_source.html">portable_archive_exception.hpp</a>&quot;</code><br />
<code>#include &lt;boost/archive/impl/basic_binary_iarchive.ipp&gt;</code><br />
<code>#include &lt;boost/archive/impl/basic_binary_iprimitive.ipp&gt;</code><br />
<code>#include &lt;boost/archive/impl/archive_pointer_iserializer.ipp&gt;</code><br />
</div>
<p><a href="portable__iarchive_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeos_1_1portable__iarchive.html">eos::portable_iarchive</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Portable binary input archive using little endian format.  <a href="classeos_1_1portable__iarchive.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceeos"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceeos.html">eos</a></td></tr>
<tr class="memdesc:namespaceeos"><td class="mdescLeft">&#160;</td><td class="mdescRight">Top-level namespace of the portable binary archives. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceboost"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceboost.html">boost</a></td></tr>
<tr class="memdesc:namespaceboost"><td class="mdescLeft">&#160;</td><td class="mdescRight">Top-level namespace of the Boost library. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceboost_1_1archive"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceboost_1_1archive.html">boost::archive</a></td></tr>
<tr class="memdesc:namespaceboost_1_1archive"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nested namespace of the Boost/archives library. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6e762ef6284dfc198f7cc2c990bfe825"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="portable__iarchive_8hpp.html#a6e762ef6284dfc198f7cc2c990bfe825">POLYMORPHIC</a>(T)&#160;&#160;&#160;boost::archive::detail::polymorphic_iarchive_impl&lt;T&gt;</td></tr>
<tr class="separator:a6e762ef6284dfc198f7cc2c990bfe825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc351baaf7169bfeb132ce3d02dbe7e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="portable__iarchive_8hpp.html#acc351baaf7169bfeb132ce3d02dbe7e1">BOOST_ARCHIVE_CUSTOM_IARCHIVE_TYPES</a>&#160;&#160;&#160;<a class="el" href="classeos_1_1portable__iarchive.html">eos::portable_iarchive</a></td></tr>
<tr class="separator:acc351baaf7169bfeb132ce3d02dbe7e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af4566a3bcc163fe25b68279af6fbb62f"><td class="memItemLeft" align="right" valign="top">typedef boost::archive::basic_binary_iprimitive&lt; portable_iarchive, std::istream &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceeos.html#af4566a3bcc163fe25b68279af6fbb62f">eos::portable_iprimitive</a></td></tr>
<tr class="separator:af4566a3bcc163fe25b68279af6fbb62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af9a6d89fc435c6c5017756d83ecfe1d1"><td class="memItemLeft" align="right" valign="top">typedef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceeos.html#af9a6d89fc435c6c5017756d83ecfe1d1">eos::POLYMORPHIC</a> (portable_iarchive) polymorphic_portable_iarchive</td></tr>
<tr class="separator:af9a6d89fc435c6c5017756d83ecfe1d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides an archive to read from portable binary files. </p>
<dl class="section author"><dt>Author</dt><dd><a href="#" onclick="location.href='mai'+'lto:'+'chr'+'is'+'tia'+'n.'+'pfl'+'ig'+'ers'+'do'+'rff'+'er'+'@gm'+'x.'+'at'; return false;">chris<span style="display: none;">.nosp@m.</span>tian<span style="display: none;">.nosp@m.</span>.pfli<span style="display: none;">.nosp@m.</span>gers<span style="display: none;">.nosp@m.</span>dorff<span style="display: none;">.nosp@m.</span>er@g<span style="display: none;">.nosp@m.</span>mx.at</a> </dd></dl>
<dl class="section version"><dt>Version</dt><dd>5.0</dd></dl>
<p>This pair of archives brings the advantages of binary streams to the cross platform <a class="el" href="namespaceboost_1_1serialization.html" title="Nested namespace of the Boost/Serialization library. ">boost::serialization</a> user. While being almost as fast as the native binary archive it allows its files to be exchanged between cpu architectures using different byte order (endianness). Speaking of speed: in serializing numbers the (portable) binary approach is approximately ten times faster than the ascii implementation (that is inherently portable)!</p>
<p>Based on the portable archive example by Robert Ramey this implementation uses Beman Dawes endian library and fp_utilities from Johan Rade, both being in boost since 1.36. Prior to that you need to add them both (header only) to your boost directory before you're able to use the archives provided. Our archives have been tested successfully for boost versions 1.33 to 1.49!</p>
<dl class="section note"><dt>Note</dt><dd>Correct behaviour has so far been confirmed using PowerPC-32, x86-32 and x86-64 platforms featuring different byte order. So there is a good chance it will instantly work for your specific setup. If you encounter problems or have suggestions please contact the author.</dd>
<dd>
Version 5.0 is now compatible with boost up to version 1.49 and enables serialization of std::wstring by converting it to/from utf8 (thanks to Arash Abghari for this suggestion). With that all unit tests from the serialization library pass again with the notable exception of user defined primitive types. Those are not supported and as a result any user defined type to be used with the portable archives are required to be at least object_serializable.</dd>
<dd>
Version 4.2 maintains compatibility with the latest boost 1.45 and adds serialization of special floating point values inf and NaN as proposed by Francois Mauger.</dd>
<dd>
Version 4.1 makes the archives work together with boost 1.40 and 1.41. Thanks to Francois Mauger for his suggestions.</dd>
<dd>
Version 4 removes one level of the inheritance hierarchy and directly builds upon binary primitive and basic binary archive, thereby fixing the last open issue regarding array serialization. Thanks to Robert Ramey for the hint.</dd>
<dd>
A few fixes introduced in version 3.1 let the archives pass all of the serialization tests. Thanks to Sergey Morozov for running the tests. Wouter Bijlsma pointed out where to find the fp_utilities and endian libraries headers inside the boost distribution. I would never have found them so thank him it works out of the box since boost 1.36.</dd>
<dd>
With Version 3.0 the archives have been made portable across different boost versions. For that purpose a header is added to the data that supplies the underlying serialization library version. Backwards compatibility is maintained by assuming library version boost 1.33 if the iarchive is created using the no_header flag. Whether a header is present or not can be guessed by peeking into the stream: the header's first byte is the magic number 127 coinciding with 'e'|'o'|'s' :-)</dd>
<dd>
